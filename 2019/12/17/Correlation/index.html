<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>Pearson相关方法和Spearman相关方法 | Hugo&#39;s Note</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="statistics," />
  

  <meta name="description" content="什么是相关？相关系数可度量两个变量倾向于同时变化的程度。该系数同时描述了关系的强度和方向。 Pearson 积矩相关 Pearson 相关评估两个连续变量之间的线性关系。当一个变量中的变化与另一个变量中的成比例变化相关时，这两个变量具有线性关系。   \rho_{X, Y}&#x3D;\frac{\operatorname{cov}(X, Y)}{\sigma_{X} \sigma_{Y}}&#x3D;\frac{E">
<meta property="og:type" content="article">
<meta property="og:title" content="Pearson相关方法和Spearman相关方法">
<meta property="og:url" content="https://fenghuji.github.io/2019/12/17/Correlation/index.html">
<meta property="og:site_name" content="Hugo&#39;s Note">
<meta property="og:description" content="什么是相关？相关系数可度量两个变量倾向于同时变化的程度。该系数同时描述了关系的强度和方向。 Pearson 积矩相关 Pearson 相关评估两个连续变量之间的线性关系。当一个变量中的变化与另一个变量中的成比例变化相关时，这两个变量具有线性关系。   \rho_{X, Y}&#x3D;\frac{\operatorname{cov}(X, Y)}{\sigma_{X} \sigma_{Y}}&#x3D;\frac{E">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://hugo-blog-1256988836.cos.ap-chengdu.myqcloud.com/Blog/Images/pearson_spearman/ps1.png">
<meta property="og:image" content="https://hugo-blog-1256988836.cos.ap-chengdu.myqcloud.com/Blog/Images/pearson_spearman/ps2.png">
<meta property="og:image" content="https://hugo-blog-1256988836.cos.ap-chengdu.myqcloud.com/Blog/Images/pearson_spearman/ps3.png">
<meta property="og:image" content="https://hugo-blog-1256988836.cos.ap-chengdu.myqcloud.com/Blog/Images/pearson_spearman/ps4.png">
<meta property="og:image" content="https://hugo-blog-1256988836.cos.ap-chengdu.myqcloud.com/Blog/Images/pearson_spearman/ps5.png">
<meta property="og:image" content="https://hugo-blog-1256988836.cos.ap-chengdu.myqcloud.com/Blog/Images/pearson_spearman/ps6.png">
<meta property="article:published_time" content="2019-12-17T07:58:00.000Z">
<meta property="article:modified_time" content="2019-12-17T07:58:00.000Z">
<meta property="article:author" content="Hugo Ji">
<meta property="article:tag" content="statistics">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hugo-blog-1256988836.cos.ap-chengdu.myqcloud.com/Blog/Images/pearson_spearman/ps1.png">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbeddx" rel="stylesheet">


  
    
<link rel="stylesheet" href="/css/personal-style.css">

  

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-154715039-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  

  


  
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.3.0"></head>

<body>


  
    <span id="toolbox-mobile" class="toolbox-mobile">盒子</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">盒子</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/category/"
            rel="noopener noreferrer"
            target="_self"
            >
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tag/"
            rel="noopener noreferrer"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/link/"
            rel="noopener noreferrer"
            target="_self"
            >
            荐读
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            关于
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">Posts List</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E5%85%B3%EF%BC%9F"><span class="toc-text">什么是相关？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Pearson-%E7%A7%AF%E7%9F%A9%E7%9B%B8%E5%85%B3"><span class="toc-text">Pearson 积矩相关</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Pearson%E7%9B%B8%E5%85%B3%E6%98%BE%E8%91%97%E6%80%A7%E6%A3%80%E6%B5%8B"><span class="toc-text">Pearson相关显著性检测</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Spearman-%E7%A7%A9%E6%AC%A1%E7%9B%B8%E5%85%B3"><span class="toc-text">Spearman 秩次相关</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9-Pearson-%E5%92%8C-Spearman-%E7%B3%BB%E6%95%B0%E8%BF%9B%E8%A1%8C%E6%AF%94%E8%BE%83"><span class="toc-text">对 Pearson 和 Spearman 系数进行比较</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#R%E8%BF%9B%E8%A1%8C%E7%9B%B8%E5%85%B3%E7%B3%BB%E6%95%B0%E7%9A%84%E8%AE%A1%E7%AE%97"><span class="toc-text">R进行相关系数的计算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E6%80%A7%E7%9A%84%E8%AE%A1%E7%AE%97"><span class="toc-text">相关性的计算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E6%80%A7%E6%98%BE%E8%91%97%E6%B0%B4%E5%B9%B3%E7%9A%84%E8%AE%A1%E7%AE%97"><span class="toc-text">相关性显著水平的计算</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#cor-test-%E6%A3%80%E9%AA%8C"><span class="toc-text">cor.test()检验</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E5%9B%BE"><span class="toc-text">相关图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-text">Reference</span></a></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-Correlation" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">Pearson相关方法和Spearman相关方法</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2019.12.17</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>Hugo Ji</span>
        </span>
      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/Statistics/">Statistics</a>
  </span>



      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      
      
    </div>
  </header>

  <div class="article-content">
    
      <h2 id="什么是相关？"><a href="#什么是相关？" class="headerlink" title="什么是相关？"></a>什么是相关？</h2><p>相关系数可度量两个变量倾向于同时变化的程度。该系数同时描述了关系的强度和方向。</p>
<h4 id="Pearson-积矩相关"><a href="#Pearson-积矩相关" class="headerlink" title="Pearson 积矩相关"></a>Pearson 积矩相关</h4><blockquote>
<p>Pearson 相关评估两个连续变量之间的线性关系。当一个变量中的变化与另一个变量中的成比例变化相关时，这两个变量具有线性关系。</p>
</blockquote>
<script type="math/tex; mode=display">
\rho_{X, Y}=\frac{\operatorname{cov}(X, Y)}{\sigma_{X} \sigma_{Y}}=\frac{E\left[\left(X-\mu_{X}\right)\left(Y-\mu_{Y}\right)\right]}{\sigma_{X} \sigma_{Y}}</script><p>例如，使用 Pearson 相关来评估生产设施温度的升高是否与巧克力涂层的厚度减少有关。Pearson相关系数书本上我们都学过，协方差/标准差乘积,简单易懂，不再赘述。</p>
<h4 id="Pearson相关显著性检测"><a href="#Pearson相关显著性检测" class="headerlink" title="Pearson相关显著性检测"></a>Pearson相关显著性检测</h4><p>在解释相关系数时，请考虑以下几点：</p>
<ul>
<li>仅根据相关即得出一个变量会导致另一个变量更改的结论绝对不合适。只有进行过适当控制的试验才能确定是否存在因果关系。</li>
<li>Pearson 相关系数对极值数据非常敏感。数据集中与其他值截然不同的单个值会极大地改变该系数值。应该尝试确定导致任何极值的原因。更正任何数据输入错误或测量误差。考虑删除与异常的一次性事件（特殊原因）相关的数据值。然后，重新执行分析。</li>
<li>低 Pearson 相关系数并不意味着变量之间不存在任何关系。变量之间可能具有非线性关系。要以图形方式检查是否存在非线性关系，尝试回归拟合</li>
</ul>
<p>虽然样本相关系数$r$可作为总体相关系数ρ的估计值，但从相关系数$ρ=0$的总体中抽出的样本，计算其相关系数r，因为有抽样误差，故不一定是0，要判断不等于0的$r$值是来自$ρ=0$的总体还是来自$ρ≠0$的总体，必须进行显著性检验。</p>
<script type="math/tex; mode=display">
t=\frac{r-0}{S_{r}}=\frac{r}{\sqrt{\frac{1-r^{2}}{n-2}}}, v=n-2</script><p>分子是样本统计量与参数值的差值，分母是线性相关系数的标准误，统计量t服从自由度为n-2的t分布，n为样本量,然后查t表作出结论。</p>
<h4 id="Spearman-秩次相关"><a href="#Spearman-秩次相关" class="headerlink" title="Spearman 秩次相关"></a>Spearman 秩次相关</h4><blockquote>
<p>Spearman 相关评估两个连续或顺序变量之间的单调关系。在单调关系中，变量倾向于同时变化，但不一定以恒定的速率变化。Spearman 相关系数基于每个变量的秩值（而非原始数据）。</p>
<p>Spearman 相关通常用于评估与顺序变量相关的关系。例如，使用 Spearman 相关来评估员工完成检验练习的顺序是否与他们工作的月数相关。</p>
</blockquote>
<p>对原始数据$x_{i},y_{i}$按从大到小排序，记$x_{‘i},y_{‘i}$为原始$x_{i},y_{i}$在排序后列表中的位置，$x_{‘i},y_{‘i}$称为$x_{i},y_{i}$的秩次，秩次差$d_{i}=x_{‘i}-y_{‘i}$。Spearman秩相关系数为：</p>
<script type="math/tex; mode=display">\rho_s=1-\frac{6\sum{d_i^2}}{n(n^2-1)}$$或者</script><p>\rho=\frac{\sum_{i}\left(x_{i}-\bar{x}\right)\left(y_{i}-\bar{y}\right)}{\sqrt{\sum_{i}\left(x_{i}-\bar{x}\right)^{2} \sum_{i}\left(y_{i}-\bar{y}\right)^{2}}}</p>
<script type="math/tex; mode=display">
最好始终用散点图来检查变量之间的关系。相关系数仅度量线性 (Pearson) 或单调 (Spearman) 关系。也有可能存在其他关系。

#### Speaman相关显著性检测
通过公式推导，认为显著性$\rho$在零假设下近似服从自由度为*n*−2的t分布：</script><p>t=r \sqrt{\frac{n-2}{1-r^{2}}}</p>
<p>$$<br>计算出t值查表得到显著性水平并作出结论。</p>
<h2 id="对-Pearson-和-Spearman-系数进行比较"><a href="#对-Pearson-和-Spearman-系数进行比较" class="headerlink" title="对 Pearson 和 Spearman 系数进行比较"></a>对 Pearson 和 Spearman 系数进行比较</h2><ul>
<li><p>Pearson 和 Spearman 相关系数的值介于 −1 和 +1 之间。当两个变量的上升量相同时，Pearson 相关系数为 +1。该关系会构成一条完美的直线。在本例中，Spearman 相关系数也是 +1。</p>
<div style="text-align: center">
<img src="https://hugo-blog-1256988836.cos.ap-chengdu.myqcloud.com/Blog/Images/pearson_spearman/ps1.png"/>
</div>
</li>
<li><p>如果关系是一个变量上升，其他变量也上升，但上升量不一致，则 Pearson 相关系数为小于 +1 的正数。在本例中，Spearman 系数仍等于 +1。</p>
<div style="text-align: center">
<img src="https://hugo-blog-1256988836.cos.ap-chengdu.myqcloud.com/Blog/Images/pearson_spearman/ps2.png"/>
</div></li>
<li>当存在随机关系或者不存在关系时，这两个相关系数都接近零。<div style="text-align: center">
<img src="https://hugo-blog-1256988836.cos.ap-chengdu.myqcloud.com/Blog/Images/pearson_spearman/ps3.png"/>
</div></li>
<li>如果关系对应的是一条完美的下降关系直线，则这两个相关系数都为 −1。<div style="text-align: center">
<img src="https://hugo-blog-1256988836.cos.ap-chengdu.myqcloud.com/Blog/Images/pearson_spearman/ps4.png"/>
</div></li>
<li>如果关系是一个变量下降，其他变量上升，但变化程度不一致，则 Pearson 相关系数为大于 −1 的负数。在本例中，Spearman 系数将仍等于 −1。<div style="text-align: center">
<img src="https://hugo-blog-1256988836.cos.ap-chengdu.myqcloud.com/Blog/Images/pearson_spearman/ps5.png"/>
</div>

</li>
</ul>
<p>相关值 −1 或 1 表明存在完全线性关系，例如，圆的半径和周长之间的关系。但是，在量化分析中，相关值的实际值小于完美关系的值。确定两个变量相关通常表示需要进行回归分析，从而尝试更详细地描述这种类型的关系。</p>
<h2 id="R进行相关系数的计算"><a href="#R进行相关系数的计算" class="headerlink" title="R进行相关系数的计算"></a>R进行相关系数的计算</h2><h3 id="相关性的计算"><a href="#相关性的计算" class="headerlink" title="相关性的计算"></a>相关性的计算</h3><p>cor()函数可以计算相关系数，而cov()函数用于计算协方差：<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cor(x, y = <span class="literal">NULL</span>, use = <span class="string">&quot;everything&quot;</span>, method = <span class="built_in">c</span>(<span class="string">&quot;pearson&quot;</span>, <span class="string">&quot;kendall&quot;</span>, <span class="string">&quot;spearman&quot;</span>))</span><br><span class="line">cov(x, y = <span class="literal">NULL</span>, use = <span class="string">&quot;everything&quot;</span>, method = <span class="built_in">c</span>(<span class="string">&quot;pearson&quot;</span>, <span class="string">&quot;kendall&quot;</span>, <span class="string">&quot;spearman&quot;</span>))</span><br></pre></td></tr></table></figure><br>参数注释：</p>
<ul>
<li>x：矩阵或数据框</li>
<li>y：默认情况下，y=NULL表示y=x，也就是说，所有变量之间两两计算相关，也可以指定其他的矩阵或数据框，使得x和y的变量之间两两计算相关。</li>
<li>use：指定缺失数据的处理方式，可选的方式为all.obs（遇到缺失数据时报错）、everything（遇到缺失数据时，把相关系数的计算结果设置为missing）、complete.obs（行删除）以及pairwise.complete.obs（成对删除）</li>
<li>method：指定相关系数的类型，可选类型为”pearson”, “kendall”, “spearman”</li>
</ul>
<p>例如，使用R基础安装包中的state.x77数据集，它提供了美国50个州的人口、收入、文盲率（Illiteracy）、预期寿命（Life Exp）、谋杀率和高中毕业率（HS Grad）等数据。<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">states &lt;- state.x77[,<span class="number">1</span>:<span class="number">6</span>]</span><br><span class="line"></span><br><span class="line">&gt; cor(states)</span><br><span class="line">            Population     Income Illiteracy    Life Exp     Murder     HS Grad</span><br><span class="line">Population  <span class="number">1.00000000</span>  <span class="number">0.2082276</span>  <span class="number">0.1076224</span> -<span class="number">0.06805195</span>  <span class="number">0.3436428</span> -<span class="number">0.09848975</span></span><br><span class="line">Income      <span class="number">0.20822756</span>  <span class="number">1.0000000</span> -<span class="number">0.4370752</span>  <span class="number">0.34025534</span> -<span class="number">0.2300776</span>  <span class="number">0.61993232</span></span><br><span class="line">Illiteracy  <span class="number">0.10762237</span> -<span class="number">0.4370752</span>  <span class="number">1.0000000</span> -<span class="number">0.58847793</span>  <span class="number">0.7029752</span> -<span class="number">0.65718861</span></span><br><span class="line">Life Exp   -<span class="number">0.06805195</span>  <span class="number">0.3402553</span> -<span class="number">0.5884779</span>  <span class="number">1.00000000</span> -<span class="number">0.7808458</span>  <span class="number">0.58221620</span></span><br><span class="line">Murder      <span class="number">0.34364275</span> -<span class="number">0.2300776</span>  <span class="number">0.7029752</span> -<span class="number">0.78084575</span>  <span class="number">1.0000000</span> -<span class="number">0.48797102</span></span><br><span class="line">HS Grad    -<span class="number">0.09848975</span>  <span class="number">0.6199323</span> -<span class="number">0.6571886</span>  <span class="number">0.58221620</span> -<span class="number">0.4879710</span>  <span class="number">1.00000000</span></span><br></pre></td></tr></table></figure></p>
<h3 id="相关性显著水平的计算"><a href="#相关性显著水平的计算" class="headerlink" title="相关性显著水平的计算"></a>相关性显著水平的计算</h3><p>在计算好相关系数之后，需要对相关性进行显著性检验，常用的原假设是变量间不相关（即总体的相关系数为0），可以使用cor.test()函数对单个的Pearson、Spearman和Kendall相关系数进行显著性检验，以验证原假设是否成立。如果p值很小，说明变量之间存在相关性，相关性的大小由相关系数确定。</p>
<p>显著性检验返回的结果中，p值（p value）就是当原假设为真时所得到的样本观察结果出现的概率。如果p值很小，说明原假设情况的发生的概率很小，而如果出现了，根据小概率原理，我们就有理由拒绝原假设，p值越小，我们拒绝原假设的理由越充分。</p>
<p>小概率原理是指：在统计学中，通常把在现实世界中发生几率小于5%的事件称之为“不可能事件”，通常把显著性水平定义为0.05，或0.025。当p值小于显著性水平时，把原假设视为不可能事件，因为拒绝原假设。</p>
<h4 id="cor-test-检验"><a href="#cor-test-检验" class="headerlink" title="cor.test()检验"></a>cor.test()检验</h4><p>cor.test()每次只能检验一种相关关系，原假设是变量间不相关，即总体的相关系数是0。<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cor.test(x, y,</span><br><span class="line">         alternative = <span class="built_in">c</span>(<span class="string">&quot;two.sided&quot;</span>, <span class="string">&quot;less&quot;</span>, <span class="string">&quot;greater&quot;</span>),</span><br><span class="line">         method = <span class="built_in">c</span>(<span class="string">&quot;pearson&quot;</span>, <span class="string">&quot;kendall&quot;</span>, <span class="string">&quot;spearman&quot;</span>),</span><br><span class="line">         exact = <span class="literal">NULL</span>, conf.level = <span class="number">0.95</span>, continuity = <span class="literal">FALSE</span>, ...)</span><br></pre></td></tr></table></figure><br>参数注释:</p>
<ul>
<li>alternative：用于指定进行双侧检验还是单侧检验，有效值是 “two.sided”, “greater” 和 “less”，对于单侧检验，当总体的相关系数小于0时，使用alternative=”less”；当总体的相关系数大于0时，使用alternative=”greater”；默认情况下，alternative=”two.side”，表示总体相关系数不等于0。</li>
<li>method：指定计算的相关类型，</li>
<li>exact：逻辑值，是否计算出精确的p值</li>
<li>conf.level：检验的置信水平</li>
</ul>
<p>例如，下面的代码用于检验预期寿命和谋杀率的Pearson相关系数为0的原假设<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; cor.test(states[,<span class="number">3</span>],states[,<span class="number">5</span>])</span><br><span class="line"></span><br><span class="line">    Pearson<span class="string">&#x27;s product-moment correlation</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">data:  states[, 3] and states[, 5]</span></span><br><span class="line"><span class="string">t = 6.8479, df = 48, p-value = 1.258e-08</span></span><br><span class="line"><span class="string">alternative hypothesis: true correlation is not equal to 0</span></span><br><span class="line"><span class="string">95 percent confidence interval:</span></span><br><span class="line"><span class="string"> 0.5279280 0.8207295</span></span><br><span class="line"><span class="string">sample estimates:</span></span><br><span class="line"><span class="string">      cor </span></span><br><span class="line"><span class="string">0.7029752 </span></span><br></pre></td></tr></table></figure></p>
<h3 id="相关图"><a href="#相关图" class="headerlink" title="相关图"></a>相关图</h3><blockquote>
<p>相关图一般很少用到，查询资料所绘制相关图都过于花哨，故可能用不着。研究时也只关注显著水平和协相关值，不关注多余信息。</p>
</blockquote>
<p>利用corrgram包中的corrgram()函数，使用图形来显示相关系数矩阵，<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">corrgram(x, order = <span class="literal">FALSE</span>,lower.panel = panel, upper.panel = panel, text.panel = textPanel, main=<span class="string">&#x27;title&#x27;</span>,</span><br><span class="line">  col.regions = colorRampPalette(<span class="built_in">c</span>(<span class="string">&quot;red&quot;</span>, <span class="string">&quot;salmon&quot;</span>,<span class="string">&quot;white&quot;</span>, <span class="string">&quot;royalblue&quot;</span>, <span class="string">&quot;navy&quot;</span>)), cor.method = <span class="string">&quot;pearson&quot;</span>,...)</span><br></pre></td></tr></table></figure><br>常用的参数注释：</p>
<ul>
<li>x：数据集</li>
<li>order：变量是否被排序</li>
<li>lower.panel / upeer.panel：对角线下/上的面板</li>
<li>text.panel=panel.txt：对角线显示为文本</li>
<li>main：主标题</li>
<li>col.regions：颜色，使用该参数控制函数中使用的颜色。</li>
<li>cor.method：做相关分析的函数名称，默认值是person，其他可用的值是：spearman, kendall</li>
</ul>
<p>例如，以mtcars数据框中的变量相关性为例，它含有11个变量，对每个变量都测量了32辆汽车，使用corrgram()函数获得相关系数：<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; library(corrgram)</span><br><span class="line">&gt; corrgram(mtcars,order = <span class="literal">TRUE</span>, lower.panel = panel.ellipse,</span><br><span class="line">  upper.panel = panel.pie,text.panel = panel.txt,main=<span class="string">&#x27;Corrgram of mtcars intercorrelations&#x27;</span>)</span><br></pre></td></tr></table></figure></p>
<div style="text-align: center">
<img src="https://hugo-blog-1256988836.cos.ap-chengdu.myqcloud.com/Blog/Images/pearson_spearman/ps6.png"/>
</div>





<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/ljhdo/p/5038541.html">数据分析 第四篇：相关分析</a><br><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Spearman%E7%9B%B8%E5%85%B3%E7%B3%BB%E6%95%B0/7977847">spearman相关系数</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/zhaozhn5/article/details/78389811">线性相关 皮尔森相关系数的计算及假设检验</a></p>

    
  </div>

</article>


   
  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">支持一下</span>
      <div class="donation-body">
        <div class="tip text-center">自愿投币</div>
        <ul>
        
          <li class="item">
            
              <span>支付宝扫一扫</span>
            
            <img src="https://hugo-blog-1256988836.cos.ap-chengdu.myqcloud.com/Blog/Images/%E4%BA%8C%E7%BB%B4%E7%A0%81.jpg" alt="">
          </li>
        
        </ul>
      </div>
    </div>
  </div>


   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2019/11/23/%E3%80%8A%E6%88%90%E4%BA%8B%E5%9C%A8%E5%A4%A9%E3%80%8B%E8%AF%BB%E5%90%8E%E6%84%9F/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2019/12/18/distance/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">Close</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/category/"
              rel="noopener noreferrer"
              target="_self"
              >
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tag/"
              rel="noopener noreferrer"
              target="_self"
              >
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/link/"
              rel="noopener noreferrer"
              target="_self"
              >
              荐读
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              关于
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    

    

    
    

    

    
    

    

<!-- Gitalk评论插件通用代码 -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js"></script>
<script>
const gitalk = new Gitalk({
  clientID: '0963ec29d0c3a87ab983',
  clientSecret: 'd9c867a5cb0ee1dc63198451aa8ba3c80d865af9',
  repo: 'fenghuji.github.io',
  owner: 'fenghuji',
  // 在这里设置一下截取前50个字符串, 这是因为 github 对 label 的长度有了要求, 如果超过
  // 50个字符串则会报错.
  // id: location.pathname.split('/').pop().substring(0, 49),
  id: md5(location.pathname),
  admin: ['fenghuji'],
  // facebook-like distraction free mode
  distractionFreeMode: false
})
gitalk.render('gitalk-container')
</script>
<!-- Gitalk代码结束 -->



  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"left","width":300,"height":600,"hOffset":50,"vOffset":-80},"mobile":{"show":false},"rect":"opacity:0.7","log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>

<canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
<script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
<script type="text/javascript" src="/js/fireworks.js"></script>

